import{$ as s,D as h,G as m,L as d,a as g,aa as c,b as f,eb as p,n as a,rb as y}from"./chunk-UVT5JPCN.js";var o={production:!0,companyName:"Gifs",companyName2:"App",companySlogan:"Maneja tus gifs",giphyApiKey:"BEFx5mRqlfvf8gbX6vbShRScj2QwUgin",giphyUrl:"https://api.giphy.com/v1"};var n=class{static mapGiphyItemToGif(i){return{id:i.id,title:i.title,url:i.images.original.url}}static mapGiphyItemsToGifArray(i){return i.map(this.mapGiphyItemToGif)}};var l=()=>{let r=localStorage.getItem("history");return r?JSON.parse(r):{}},G=class r{http=d(y);trendingGifs=s([]);trendingGifsLoading=s(!1);trendingPage=s(0);trendingGifGroup=p(()=>this.groupGifs(this.trendingGifs()));searchHistory=s(l());searchHistoryKeys=p(()=>Object.keys(this.searchHistory()));constructor(){this.loadTrendingGifs()}loadTrendingGifs(){this.trendingGifsLoading()||(this.trendingGifsLoading.set(!0),this.http.get(`${o.giphyUrl}/gifs/trending`,{params:{api_key:o.giphyApiKey,limit:20,offset:this.trendingPage()*20}}).subscribe(i=>{let e=n.mapGiphyItemsToGifArray(i.data);this.trendingGifs.update(t=>[...t,...e]),this.trendingPage.update(t=>t+1),console.log(this.trendingPage()),this.trendingGifsLoading.set(!1)}))}searchGifs(i){return this.http.get(`${o.giphyUrl}/gifs/search`,{params:{api_key:o.giphyApiKey,limit:20,q:i}}).pipe(a(({data:e})=>e),a(e=>n.mapGiphyItemsToGifArray(e)),h(e=>{this.searchHistory.update(t=>f(g({},t),{[i.toLowerCase()]:e}))}),a(e=>this.groupGifs(e)))}getHistoryGifs(i){let e=this.searchHistory()[i]??[];return this.groupGifs(e)}groupGifs(i){let e=[];for(let t=0;t<i.length;t+=3)e.push(i.slice(t,t+3));return e}saveToLocalStorage=c(()=>localStorage.setItem("history",JSON.stringify(this.searchHistory())));static \u0275fac=function(e){return new(e||r)};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};export{o as a,G as b};
